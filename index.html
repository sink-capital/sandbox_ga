<!DOCTYPE html>
<html>
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QY86BV694Z"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-QY86BV694Z');
    </script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-N9BGZXG');
    </script>
    <!-- End Google Tag Manager -->
    <!-- <script>
        let client_id;
        let session_id;
        //gtag.jsを使用して、client_idとsession_idを取得する
        gtag("get", "G-QY86BV694Z", "session_id", function(field){ 
        // console.log(field)
        session_id = field;
        })
        gtag("get", "G-QY86BV694Z", "client_id", function(field){ 
        // console.log(field)
        client_id = field;
        })
        //フロントからのコンバージョンとして、イベントを送信する
        function clickFrontButton() {
            // console.log("client_id:"+client_id+"session_id:"+session_id);
            gtag('event', 'click', {
                'event_category': 'click_button',
                'event_label': 'click_front_button',
                'client_id': client_id,
                'session_id': session_id
            });
        }
        //サーバー経由のコンバージョンとして、イベントをサーバーに送信する
        function clickBackEndButton() {
            // console.log("client_id:"+client_id+"session_id:"+session_id);
            var url = 'https://script.google.com/macros/s/AKfycbyQNl-phiSyP127kki6TryR9K_6K-534NTRF7GpHdDkSPtx-6aDh3Y2iFWTl7m86YI/exec'; // サーバAPIのURL

            var data = {
            'client_id': client_id,
            'session_id': session_id
            };

            fetch(url, {
                method: 'POST', 
                mode: 'no-cors', // no-cors mode is used as GAS does not return Access-Control-Allow-Origin header
                cache: 'no-cache', 
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(data) 
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch((error) => {
                console.error('Error:', error);
            });
        }
    </script>   -->
    <script src="banner.js"></script>
    <meta charset="utf-8">
    <title>エナジードリンク特売！</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" type="text/css" href="banner.css">
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N9BGZXG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="main-container">
        <header>
            <h1>驚きのエナジードリンク！</h1>
        </header>
        <section class="first-view">
            <h2>あなたの活力を引き出します！</h2>
            <p>私たちのエナジードリンクは、一日を通じて持続するエネルギーを提供します。</p>
            <div class="conversion-button-container">
                <button class="conversion-button" onclick=clickFrontButton() value="front_button">フロントから申し込み</button>
                <button class="conversion-button" onclick=clickBackEndButton() value="server_button">サーバーから申し込み</button>
            </div>
        </section>
    </div>
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" rel="stylesheet">
    <div class="wrapper">
        <div krt-if="state == 1">
            <div krt-on:click="onOpenFAQ" class="reception-Skin reception-MinimumWidget">
                #{widgetName}
                <div class="reception-CloseButton karte-close">
                    <img src="#{icon_close}">
                </div>
            </div>
        </div>
    
        <div krt-if="state == 2">
            <div class="reception-Skin">
                <div class="reception-Header reception-Header-question">
                    <div class="reception-Name">#{widgetName}</div>
                    <h2 class="reception-Header_Title">#{faqTitle}</h2>
                    <h3 class="reception-Header_SubTitle">#{faqSubTitle}</h3>
                    <div krt-on:click="setState(1)" class="reception-MinimizeButtonClickable">
                        <div class="reception-MinimizeButton"></div>
                    </div>
                </div>
                <ul class="reception-Question_Container js-question-container">
                    <li class="reception-Question_Item" krt-for="(key, value) in questions" krt-if="value"
                        krt-bind:key="key" krt-on:click="onSelectQuestion($index)">
                        <div class="reception-Question_Outer">
                            <p class="reception-Question js-question-item"></p>
                        </div>
                    </li>
                </ul>
                <ul krt-if="useChat">
                    <li class="reception-Question_Item reception-Question_Item-chat" krt-on:click="onSelectChat">
                        <div class="reception-Question_Outer">
                            <p class="reception-Question">チャットで質問する</p>
                        </div>
                    </li>
                </ul>
                <ul krt-if="useChat">
                    <li class="reception-Question_Item reception-Question_Item-call" krt-on:click="onSelectCall">
                        <div class="reception-Question_Outer">
                            <p class="reception-Question">電話で問い合わせる</p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    
        <div krt-if="state == 3">
            <div class="reception-Skin">
                <div class="reception-Header reception-Header-answer">
                    <div class="reception-Name">#{widgetName}</div>
                    <h2 class="reception-Header_Title">{{currentQuestion}}</h2>
                    <div krt-on:click="onBackState" class="reception-BackButton">
                        <img src="#{icon_leftArrow}">
                    </div>
                    <div krt-on:click="setState(1)" class="reception-MinimizeButtonClickable">
                        <div class="reception-MinimizeButton"></div>
                    </div>
                </div>
                <div class="reception-Answer_Container" krt-bind:class="{ 'is-scroll': isScrollable }"
                    krt-bind:style="currentContainerStyle">
                    <div ref="answer-item" class="reception-Answer_Item js-answer-item" krt-bind:style="currentItemStyle">
                        <div class="reception-Answer_TextOuter js-answer-text-outer">
                            <p class="reception-Answer" krt-html="currentAnswer">
                            </p>
                            <p krt-if="useChat" class="reception-Answer_Notice">#{chatGuidanceText}</p>
                        </div>
                    </div>
                </div>
                <ul krt-if="useChat">
                    <li class="reception-Question_Item reception-Question_Item-chat" krt-on:click="onSelectChat">
                        <div class="reception-Question_Outer">
                            <p class="reception-Question">チャットで質問する</p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    
        <!-- call tracking -->
        <div krt-if="state == 4">
            <div class="reception-Skin">
                <div class="reception-Header reception-Header-answer">
                    <div class="reception-Name">#{widgetName}</div>
                    <h2 class="reception-Header_Title">電話で問い合わせる</h2>
                    <div krt-on:click="setState(1)" class="reception-BackButton">
                        <img src="#{icon_leftArrow}">
                    </div>
                    <div krt-on:click="setState(1)" class="reception-MinimizeButtonClickable">
                        <div class="reception-MinimizeButton"></div>
                    </div>
                </div>
                <div class="reception-Answer_Container" krt-bind:class="{ 'is-scroll': isScrollable }"
                    krt-bind:style="currentContainerStyle">
                    <div ref="answer-item" class="reception-Answer_Item js-answer-item-call"
                        krt-bind:style="currentItemStyle">
                        <div class="reception-Answer_TextOuter js-answer-text-outer">
                            <div class="reception-Answer_Call">
                                <p>下記に表示された{{number_of_digits}}桁の{{label}}を音声ガイドに従いご入力ください。</p>
                                <strong class="telNumber">
                                    お問い合わせ窓口：
                                    <strong class="telNumber"><a href="tel:{{telNumber}}">{{telNumber}}</a></strong>
                                </strong>
                                <strong class="idNumber">
                                    {{label}}<br />
                                    <em>{{idNumber}}</em>
                                </strong>
                            </div>
                            <p class="reception-Answer_Call-Notice">
                                <i class="fa fa-exclamation-triangle" aria-label="注意:"></i>
                                {{label}}の有効期限は5分になります。5分経過している場合は再度こちらの画面を開き直してください。</br>
                                また、過去電話でお問い合わせ頂いている場合、{{label}}の入力は不要となります。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
